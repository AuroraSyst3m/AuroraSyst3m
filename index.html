<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸŒŒAuroraðŸŒŒ | Secure Console</title>
    <style>
        :root { --mint: #4ecca3; --blurple: #7289da; --bg: #050505; }
        body { margin: 0; padding: 0; color: #fff; font-family: 'Segoe UI', sans-serif; background: var(--bg); overflow-x: hidden; }
        
        .aurora-bg { position: fixed; inset: 0; background: linear-gradient(217deg, rgba(78, 204, 163, .1), rgba(0,0,0,0) 70.71%), linear-gradient(127deg, rgba(114, 137, 218, .1), rgba(0,0,0,0) 70.71%); filter: blur(80px); z-index: -1; }

        /* Auth Screen */
        .auth-overlay { position: fixed; inset: 0; background: var(--bg); display: flex; align-items: center; justify-content: center; z-index: 2000; }
        .auth-box { background: rgba(255,255,255,0.03); padding: 50px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.1); text-align: center; width: 350px; backdrop-filter: blur(20px); }
        
        /* Navigation */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 10%; background: rgba(0,0,0,0.5); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid rgba(255,255,255,0.05); }
        nav .links a { color: #888; text-decoration: none; margin-left: 30px; transition: 0.3s; cursor: pointer; font-weight: bold; font-size: 14px; }
        nav .links a:hover, nav .links a.active { color: var(--mint); }

        .container { padding: 40px 10%; }
        .hidden { display: none; }

        /* Admin Modal */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 3000; }
        .modal { background: #111; padding: 30px; border-radius: 15px; border: 1px solid var(--mint); width: 400px; text-align: center; }
        .admin-input { width: 90%; padding: 10px; margin: 10px 0; background: #222; border: 1px solid #444; color: white; border-radius: 5px; }

        /* Price Cards */
        .price-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-top: 30px; }
        .price-card { position: relative; background: #0a0a0a; padding: 2px; border-radius: 22px; overflow: hidden; display: flex; transition: 0.4s; min-height: 320px; }
        .price-card:hover { transform: scale(1.03); box-shadow: 0 0 30px rgba(78, 204, 163, 0.2); }
        .price-card::before { content: ''; position: absolute; width: 200%; height: 200%; background-image: conic-gradient(transparent, transparent, var(--mint), transparent, transparent, transparent, var(--blurple), transparent); animation: rotate 4s linear infinite; top: -50%; left: -50%; }
        .card-inner { background: #0a0a0a; padding: 25px; border-radius: 20px; width: 100%; position: relative; z-index: 5; display: flex; flex-direction: column; justify-content: space-between; }
        
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        h3 { margin-top: 0; letter-spacing: 2px; text-transform: uppercase; font-size: 1.4em; }
        .price-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .price-row label { color: #888; font-size: 0.9em; }
        
        .btn { background: var(--mint); color: #000; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 20px; transition: 0.3s; }
        .btn:hover { opacity: 0.8; }
        
        input { width: 100%; padding: 12px; margin: 20px 0; background: #111; border: 1px solid #333; color: white; border-radius: 10px; text-align: center; box-sizing: border-box; outline: none; }
    </style>
</head>
<body>

    <div class="aurora-bg"></div>

    <div id="auth-screen" class="auth-overlay">
        <div class="auth-box" id="login-form">
            <h1 style="letter-spacing: 8px;">ðŸŒŒAURORAðŸŒŒ</h1>
            <input type="text" id="discord-user" placeholder="Discord Username">
            <button class="btn" onclick="requestAccess()">INITIALIZE LINK</button>
        </div>
        <div class="auth-box hidden" id="waiting-form">
            <h2 style="color: var(--mint);">WAITING...</h2>
            <p>Check your Discord DMs for the âœ…</p>
        </div>
    </div>

    <div id="admin-modal" class="modal-overlay">
        <div class="modal">
            <h3>Add New Service</h3>
            <input type="text" id="new-name" class="admin-input" placeholder="Service Name">
            <input type="text" id="new-desc" class="admin-input" placeholder="Description/Price">
            <input type="text" id="new-link" class="admin-input" placeholder="Payment Link">
            <button class="btn" onclick="saveNewService()">Deploy UI</button>
            <button class="btn" onclick="closeModal()" style="background: #333; color: white;">Cancel</button>
        </div>
    </div>

    <div id="main-site" class="hidden">
        <nav>
            <h2 style="color: var(--mint); letter-spacing: 4px; margin:0;">ðŸŒŒAURORAðŸŒŒ</h2>
            <div class="links">
                <a onclick="showTab('home')" id="nav-home" class="active">HOME</a>
                <a onclick="showTab('payments')" id="nav-payments">PAYMENTS</a>
                <a onclick="showTab('contact')" id="nav-contact">CONTACT</a>
                <a onclick="location.reload()" style="color: #ff4d4d;">LOGOUT</a>
            </div>
        </nav>

        <div class="container">
            <section id="tab-home">
                <h1>Welcome, <span id="user-display" style="color: var(--mint);">Operator</span></h1>
                <p>All security protocols are active. Select a service to begin.</p>
            </section>

            <section id="tab-payments" class="hidden">
                <h1>Service <span style="color: var(--mint);">Licenses</span></h1>
                <div class="price-grid" id="service-grid">
                </div>
            </section>

            <section id="tab-contact" class="hidden">
                <h1>Contact Support</h1>
                <div class="price-card" style="max-width: 500px; min-height: auto;">
                    <div class="card-inner">
                        <p><b>Support Email:</b> help@aurora.io</p>
                        <p><b>Discord:</b> .gg/aurora</p>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script>
        // --- ðŸŸ¢ NAMES AND PRICES AREA ðŸŸ¢ ---
        // Change these to your liking! I added 6 more for a total of 14.
        const initialServices = [
            { name: "IXL (MATH)", color: "var(--mint)", prices: { Weekly: "$2.00", Monthly: "$3.50", Yearly: "$35.00" } },
            { name: "EP (MATH)", color: "var(--blurple)", prices: { Weekly: "$1.50", Monthly: "$4.50", Yearly: "$44.00" } },
            { name: "KAHOOT (MATH)", color: "var(--mint)", prices: { Weekly: "$3.50", Monthly: "$6.50", Yearly: "$65.00" } },
            { name: "BLOOKET (MATH)", color: "var(--blurple)", prices: { Weekly: "$2.00", Monthly: "$5.00", Yearly: "$50.00" } },
            { name: "ANYTHING AI", color: "var(--mint)", prices: { Weekly: "$2.00", Monthly: "$5.00", Yearly: "$50.00" } },
            { name: "AQUA AURORA (DONT BUY) (dont buy)", color: "var(--blurple)", prices: { Weekly: "$1.00", Monthly: "$3.00", Yearly: "$30.00" } },
            { name: "DONATION", color: "var(--mint)", prices: { Weekly: "$1.50", Monthly: "$4.00", Yearly: "$40.00" } },
            { name: "WHAT DO YOU WANT HERE?", color: "var(--blurple)", prices: { Weekly: "$2.50", Monthly: "$6.00", Yearly: "$60.00" } },
            // --- NEW 6 SERVICES ADDED BELOW ---
            { name: "IXL (ENGLISH)", color: "var(--mint)", prices: { Weekly: "$1.80", Monthly: "$2.90", Yearly: "$30.00" } },
            { name: "EP (ENGLISH)", color: "var(--blurple)", prices: { Weekly: "$1.00", Monthly: "$4.00", Yearly: "$44.00" } },
            { name: "KAHOOT (ENGLISH)", color: "var(--mint)", prices: { Weekly: "$4.00", Monthly: "$8.00", Yearly: "$80.00" } },
            { name: "BLOOKET (ENGLISH)", color: "var(--blurple)", prices: { Weekly: "$3.00", Monthly: "$5.10", Yearly: "$59.99" } },
            { name: "VIDEO PLAYER (ANY VIDEOS YOU WANT)", color: "var(--mint)", prices: { Weekly: "$?.??", Monthly: "$?.??", Yearly: "$?.??" } },
            { name: "CUSTOM REQUEST", color: "var(--blurple)", prices: { Weekly: "$?.??", Monthly: "$?.??", Yearly: "$?.??" } }
        ];

        const firebaseConfig = {
            apiKey: "AIzaSyCmnO3VTJ3KYg5x5dWOMLexT1_a9VPpP1Q",
            authDomain: "foldrex-aurora.firebaseapp.com",
            projectId: "foldrex-aurora",
            storageBucket: "foldrex-aurora.firebasestorage.app",
            messagingSenderId: "740976362878",
            appId: "1:740976362878:web:115653d38b717fd7171f2f"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        const OWNER_ID = "YOUR_DISCORD_NAME"; 
        let currentUser = "";

        // --- AUTH ---
        async function requestAccess() {
            currentUser = document.getElementById('discord-user').value.trim();
            if(!currentUser) return alert("Enter name!");
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('waiting-form').classList.remove('hidden');

            const docRef = db.collection("auth_requests").doc(currentUser);
            await docRef.set({ username: currentUser, status: "pending" });

            docRef.onSnapshot((doc) => {
                if (doc.exists && doc.data().status === "approved") { unlockSite(); }
            });
        }

        function unlockSite() {
            document.getElementById('auth-screen').classList.add('hidden');
            document.getElementById('main-site').classList.remove('hidden');
            document.getElementById('user-display').innerText = currentUser;
            renderAllServices();
        }

        // --- RENDER SERVICES ---
        function renderAllServices() {
            const grid = document.getElementById('service-grid');
            grid.innerHTML = ""; 

            initialServices.forEach(s => {
                let priceLines = "";
                for (const [time, price] of Object.entries(s.prices)) {
                    priceLines += `<div class="price-row"><label>${time}</label><span>${price}</span></div>`;
                }

                const card = document.createElement('div');
                card.className = "price-card";
                card.innerHTML = `
                    <div class="card-inner">
                        <div>
                            <h3 style="color: ${s.color}">${s.name}</h3>
                            ${priceLines}
                        </div>
                        <button class="btn" onclick="startPurchase('${s.name}')" style="background: ${s.color}">PURCHASE</button>
                    </div>
                `;
                grid.appendChild(card);
            });

            loadDynamicServices();
        }

        async function loadDynamicServices() {
            db.collection("services").onSnapshot((snapshot) => {
                document.querySelectorAll('.dynamic-card, .add-card-btn').forEach(el => el.remove());
                const grid = document.getElementById('service-grid');

                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const div = document.createElement('div');
                    div.className = "price-card dynamic-card";
                    div.innerHTML = `
                        <div class="card-inner">
                            <div>
                                <h3>${data.name}</h3>
                                <p style="color: #ccc; margin-top: 20px;">${data.desc}</p>
                            </div>
                            <button class="btn" onclick="startPurchase('${data.link}')">PURCHASE</button>
                            ${currentUser === OWNER_ID ? `<button onclick="deleteService('${doc.id}')" style="background:none; border:none; color:#ff4d4d; cursor:pointer; margin-top:10px; font-size:12px;">[Delete]</button>` : ''}
                        </div>
                    `;
                    grid.appendChild(div);
                });

                if(currentUser === OWNER_ID) {
                    const addBtn = document.createElement('div');
                    addBtn.className = "price-card add-card-btn";
                    addBtn.style.cursor = "pointer";
                    addBtn.innerHTML = `<div class="card-inner" style="justify-content:center; align-items:center; border:2px dashed #444;">
                        <h1 style="color: var(--mint); margin:0;">+</h1><p style="color: #666;">Add Service</p>
                    </div>`;
                    addBtn.onclick = openModal;
                    grid.appendChild(addBtn);
                }
            });
        }

        async function startPurchase(serviceName) {
            if(serviceName.startsWith("http")) { window.open(serviceName, '_blank'); return; }
            try {
                await db.collection("purchases").add({
                    username: currentUser,
                    service: serviceName,
                    status: "waiting_for_payment",
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                alert("Purchase Request Sent! Check Discord.");
            } catch (e) { console.error(e); }
        }

        function openModal() { document.getElementById('admin-modal').style.display = 'flex'; }
        function closeModal() { document.getElementById('admin-modal').style.display = 'none'; }
        
        async function saveNewService() {
            const name = document.getElementById('new-name').value;
            const desc = document.getElementById('new-desc').value;
            const link = document.getElementById('new-link').value;
            if(!name || !link) return alert("Fill required fields!");
            await db.collection("services").add({ name, desc, link });
            closeModal();
        }

        async function deleteService(id) {
            if(confirm("Delete this?")) { await db.collection("services").doc(id).delete(); }
        }

        function showTab(id) {
            ['home', 'payments', 'contact'].forEach(t => {
                document.getElementById('tab-' + t).classList.add('hidden');
                document.getElementById('nav-' + t).classList.remove('active');
            });
            document.getElementById('tab-' + id).classList.remove('hidden');
            document.getElementById('nav-' + id).classList.add('active');
        }
    </script>
</body>
</html>